<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="Report/lib/bootstrap.min.css">
  <script src="Report/lib/d3.min.js"></script>
  <script src="Report/lib/jquery-2.1.1.min.js"></script>
  <script src="Report/lib/jquery.cookie.min.js"></script>
  <script src="Report/data.js"></script>
  <script src="Report/lib/bootstrap.min.js"></script>
  <style>
  body {
    padding-top: 70px;
  }
  .bar {
    fill: steelblue;
  }

  .axis text {
    font: 10px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  .img-result-container {
    width: 350px;
    float: left;
  }

  .table-result {
    float: left;
    margin: 10px;
  }
  .table-result table,td {
    border: 1px solid steelblue;
    padding: 5px;
    text-align: center;
  }

  .imp-logo {
      height: 150px;
      width: 150px;
      background: url(Report/lib/IMP_logo.png);
      background-size: 100% 100%;
      background-repeat: no-repeat;
  }

  .vizbin-logo {
      width: 220px;
  }

  </style>
</head>
<body>
  <div id="block-stats" class="container-fluid">
     <div>
         <div class="col-xs-2 col-md-2"><div class='imp-logo'></div>
     </div>
    <div id="tabs" role="tabpanel">

          <ul id="tabnav" class="nav nav-tabs navbar-nav navbar-fixed-top navbar-inverse" role="tablist">
            <a class="navbar-brand" href="#"> IMP <small>Integrated Meta-omic Pipeline </small></a>
            <li><a href="#raw" aria-controls="raw" role="tab" data-toggle="tab">Raw</a></li>
            <li><a href="#preprocess" aria-controls="preprocess" role="tab" data-toggle="tab">Preprocess</a></li>
            <li><a href="#assembly" aria-controls="assembly" role="tab" data-toggle="tab">Assembly</a></li>
            <li><a href="#mapping" aria-controls="mapping" role="tab" data-toggle="tab">Mapping</a></li>
            <li><a id="annottab" href="#annotation" aria-controls="annotation" role="tab" data-toggle="tab">Annotation</a></li>
            <li><a href="#variants" aria-controls="variants" role="tab" data-toggle="tab">Variants</a></li>
            <li><a href="#overview" aria-controls="overview" role="tab" data-toggle="tab">Workflow overview</a></li>
            <li><a href="#configurations" aria-controls="configurations" role="tab" data-toggle="tab">Configuration</a></li>
            <li><a href="#references" aria-controls="references" role="tab" data-toggle="tab">References</a></li>
            <p class="navbar-text navbar-right"></p>
          </ul>
    </div>
      <div id="wholecontent" class="container">
        <div class="tab-content">


            <!-- RAW STATISTICS -->
            <div role="tabpanel" class="tab-pane fade" id="raw">
              <section id="raw-section" class="row">
                <h2><small>Raw data QC</small></h2>
                <div id="but-raw" class="btn-group" data-toggle="buttons" name="raw-data">
                  <label class="btn btn-primary">
                      <input id="but-raw-mgr1" type="radio" value="Analysis/stats/mg/mg.r1.fq_fastqc.html" class="btn btn-default" name="raw-data">Metagenomic pair-1 FASTQC report
                  </label>
                  <label class="btn btn-primary">
                      <input id="but-raw-mgr2" type="radio" value="Analysis/stats/mg/mg.r2.fq_fastqc.html" class="btn btn-default" name="raw-data">Metagenomic pair-2 FASTQC report
                  </label>
                </div>
                <div class="row">
                    <iframe id="ifr-raw-stat" src="Analysis/stats/mg/mg.r1.fq_fastqc.html" style="position: absolute; width: 100%;height: 100%; border: none"></iframe>
                </div>
              </section>
            </div>


          <!-- PREPROCESS STATISTICS -->
          <div role="tabpanel" class="tab-pane fade active" id="preprocess">
            <section id="preprocess-section" class="row">
                <h2><small>Preprocessed data QC</small></h2>
                <div id="but-preprocess" class="btn-group" data-toggle="buttons" name="preprocess-data">
                  <label class="btn btn-primary">
                      <input id="but-preprocess-mgr1" type="radio" value="Analysis/stats/mg/mg.r1_preprocessed_fastqc.html" class="btn btn-default" name="preprocess-data">Metagenomic pair-1 FASTQC report
                  </label>
                  <label class="btn btn-primary">
                      <input id="but-preprocess-mgr2" type="radio" value="Analysis/stats/mg/mg.r2_preprocessed_fastqc.html" class="btn btn-default" name="preprocess-data">Metagenomic pair-2 FASTQC report
                  </label>
                  <label class="btn btn-primary">
                      <input id="but-preprocess-mgse" type="radio" value="Analysis/stats/mg/mg.se_preprocessed_fastqc.html" class="btn btn-default" name="preprocess-data">Metagenomic single-end FASTQC report
                  </label>
                </div>
                <div class="row">
                    <iframe id="ifr-preprocess-stat" src="Analysis/stats/mg/mg.r1_preprocessed_fastqc.html" style="position: absolute; width: 100%;height: 100%; border: none"></iframe>
                </div>
            </section>
          </div>

            <!-- FILTERING -->
            <section id="filtering-section" class="row">
              <div class="row">
                <div class="table-result" id="mg_read_stats"></div>
                <div class="table-result" id="mt_read_stats"></div>
              </div>
            </section>

          <!--  ASseMBLY -->
          <div role="tabpanel" class="tab-pane fade" id="assembly">
            <section id="assembly-section" class="row">
                <h2><small>Assembly visualization, QC and taxonomic annotation</small></h2>
                <div id="but-assembly" class="row btn-group" data-toggle="buttons" name="assembly-data">
                    <label class="btn btn-primary active">
                        <input id="but-assembly1" type="radio" value="Analysis/results/IMP-vizbin_length.png" class="btn btn-default" name="assembly-data" checked>VizBin + contig length
                    </label>
                    <label class="btn btn-primary">
                        <input id="but-assembly2" type="radio" value="Analysis/results/IMP-vizbin_length_GC.png" class="btn btn-default" name="assembly-data">VizBin + GC %
                    </label>
                    <label class="btn btn-primary">
                        <input id="but-assembly3" type="radio" value="Analysis/results/quast/summary/report.html" class="btn btn-default" name="assembly-data">MetaQUAST report
                        <div class="metaquast-p" style="display:none">
                            <p class="text-center lead">Sub-report made with <a href="http://bioinf.spbau.ru/metaquast">MetaQUAST</a></p>
                        </div>
                    </label>
                </div>

                <div class="row">
                    <div id='assembly-wrapper' class='row'><img class='img-responsive' src='Analysis/results/IMP-vizbin_length.png'/></div>
                </div>
                <div class="vizbin-img row">
                    <p class="lead text-center">
                        In order to perform a human augmented binning of the contigs, please import the following
                        <a href="Analysis/mg.vizbin.filtered.fa">fasta file</a> to
                    </p>
                </div>
                <div class="vizbin-img row">
                    <div style="text-align:center;">
                        <a href="http://claczny.github.io/VizBin/"><img src='Report/lib/vizbin_logo.png'/></a>
                    </div>
                </div>



            </section>
          </div>

          <!-- MAPPING -->
          <div role="tabpanel" class="tab-pane fade" id="mapping">
            <section id="mapping-section" class="row">
                <h2><small>Read mapping visualizations</small></h2>
                <div id="but-mapping" class="row btn-group" data-toggle="buttons" name="mapping-data">
                    <!-- <label class="btn btn-primary active">
                        <input id="but-mapping1" type="radio" value="Analysis/results/IMP-rpkm_density.png" class="btn btn-default" name="mapping-data" checked>RPKM density beanplot
                    </label> -->
                    <label class="btn btn-primary">
                        <input id="but-mapping2" type="radio" value="Analysis/results/IMP-MG_coverage_density.png" class="btn btn-default" name="mapping-data">Coverage and depth density beanplot
                    </label>
                    <label class="btn btn-primary">
                        <input id="but-mapping3" type="radio" value="Analysis/results/IMP-MG_reads_density.png" class="btn btn-default" name="mapping-data">Reads density beanplot
                    </label>
                    <label class="btn btn-primary">
                        <input id="but-mapping4" type="radio" value="Analysis/results/IMP-MG_vizbin_length_cov.png" class="btn btn-default" name="mapping-data">VizBin + metagenomic coverage
                    </label>
                    <!-- <label class="btn btn-primary">
                        <input id="but-mapping5" type="radio" value="Analysis/results/IMP-vizbin_length_mgcov.png" class="btn btn-default" name="mapping-data">VizBin + metatranscriptomic coverage
                    </label> -->
                    <label class="btn btn-primary">
                        <input id="but-mapping6" type="radio" value="Analysis/results/IMP-MG_vizbin_length_depth.png" class="btn btn-default" name="mapping-data">VizBin + metagenomic depth of coverage
                    </label>
                    <!-- <label class="btn btn-primary">
                        <input id="but-mapping7" type="radio" value="Analysis/results/IMP-vizbin_length_mgdepth.png" class="btn btn-default" name="mapping-data">VizBin + metatranscriptomic depth of coverage
                    </label> -->
                </div>
                <div class="row">
                    <img id='mapping-wrapper' class='img-responsive' src='Analysis/results/IMP-MG_reads_density.png'/>
                </div>
                <div class="vizbin-img row">
                    <p class="lead text-center">
                        In order to perform a human augmented binning of the contigs, please import the following
                        <a href="Analysis/mg.vizbin.filtered.fa">fasta file</a> to
                    </p>
                </div>
                <div class="vizbin-img row">
                    <div style="text-align:center;">
                        <a href="http://claczny.github.io/VizBin/"><img src='Report/lib/vizbin_logo.png'/></a>
                    </div>
                </div>
          </section>
        </div>

        <!-- ANNOTATION -->
        <div role="tabpanel" class="tab-pane fade" id="annotation">
          <section id="annotation-section" class="row">
              <h1><small>KEGG Ontology based Functional Krona Chart</small></h1>
              <div id="but-annot" class="btn-group" data-toggle="buttons" name="annot-data">
                <label class="btn btn-primary">
                    <input id="but-annot-mg" type="radio" value="Analysis/results/mg.gene_kegg_krona.html" class="btn btn-default" name="annot-data">Metatranscriptome
                </label>
            </div>
              <div class="row">
                  <iframe id="ifr-kronaplot"  style="position: absolute; width: 80%;height: 80%; border: none"></iframe>
              </div>

          </section>
        </div>
        <!-- <div role="tabpanel" class="tab-pane fade" id="annotationmt">
          <section id="annotation-section" class="row">
              <h1>mt annotation <small>Kronaplot</small></h1>
              <div class="row">
                  <iframe id="mt-kronaplot" src="Analysis/results/mt.gene_kegg_krona.html" style="position: absolute; width: 80%;height: 80%; border: none"></iframe>
              </div>
          </section>
        </div> -->



        <!-- VARIANTS -->
        <div role="tabpanel" class="tab-pane fade" id="variants">
          <section id="variants-section" class="row">
           <h2><small>Variants </small></h2>
           <div id="but-variant" class="row btn-group" data-toggle="buttons" name="variant-data">
               <label class="btn btn-primary active">
                   <input id="but-variant1" type="radio" value="Analysis/results/IMP-MG_var_count.png" class="btn btn-default" name="variant-data" checked>Variant count and density beanplot
               </label>
               <!-- <label class="btn btn-primary">
                   <input id="but-variant2" type="radio" value="Analysis/results/IMP-var_density.png" class="btn btn-default" name="variant-data">Variant density beanplot
               </label> -->
               <label class="btn btn-primary">
                   <input id="but-variant4" type="radio" value="Analysis/results/IMP-MG_vizbin_length_vardens.png" class="btn btn-default" name="variant-data">VizBin + metagenomic variant density
               </label>
           </div>
           <div class="row">
               <img id='variant-wrapper' class='img-responsive' src='Analysis/results/IMP-MG_var_count.png'/>
           </div>
           <div class="row">
               <p class="lead vizbin-img text-center" style="display:none">
                   In order to perform a human augmented binning of the contigs, please import the following
                   <a href="Analysis/mg.vizbin.filtered.fa">fasta file</a> to
               </p>
           </div>
           <div class="vizbin-img row" style="display:none">
               <div style="text-align:center;">
                   <a href="http://claczny.github.io/VizBin/"><img src='Report/lib/vizbin_logo.png'/></a>
               </div>
           </div>


          </section>
        </div>
        <!--  IMP STATS -->
        <div role="tabpanel" class="tab-pane fade" id="overview">
          <section class="row">
            <section id="impstatistics-section">
              <h2><small>Statistics </small></h2>
              <div id="imp-stats" class="row">
                <div id="basic-info"></div>
                <div id="time-charts-mean"></div>
                <div id="bar-chart"></div>
              </div>
            </section>

            <!--  DIAGRAMS -->
            <span id="diagrams"></span>
            <section id="diagrams-section">
              <h2><small>Workflow diagram </small></h2>
              <div id="imp-diagram" class="row">
                <p>The workflow is also available in <a href="Report/workflow.pdf">PDF</a>.</p>
                <img src="Report/workflow.png"/>
              </div>
            </section>
          </section>
        </div>
        <!-- IMP CONFIG -->
        <div role="tabpanel" class="tab-pane fade" id="configurations">
          <section id="config-section" class="row">
            <h2><small>Configuration </small></h2>
            <div>
              IMP has run with the configuration file saved at: <a href="Report/config.json">config.json</a>.
              <ul id="configuration" class="list-group">
              </ul>
            </div>
          </section>
          <!-- IMP LOG -->
          <span id="log"></span>
          <section id="log-section"  class="row">
            <h2><small>Log </small></h2>
            <div>
              <p>The log files register all commands that have been run by IMP.</p>
            </div>
            <div>
              <p>The log are accessible in here IMP steps:
                <ul>
                    <li><a href="Preprocessing/Preprocessing.log">Preprocessing</a></li>
                    <li><a href="Assembly/Assembly.log">Assembly</a></li>
                    <li><a href="Analysis/Analysis.log">Analysis</a></li>
                    <li><a href="Util/Util.log">Util</a></li>
                </ul>
            </p>
            </div>
          </section>
           <section id="files-section"  class="row">
               <h2><small>Result files </small></h2>
               <p>All results files can be found in the <a href=".">root directory</a> of this report.</p>
           </section>
           <br/><br/>
        </div>
        <!-- REFERENCES -->
        <div role="tabpanel" class="tab-pane fade" id="references">
          <section id="references-section" class="row">
            <h2><small>Please cite the pre-print article on <a href="http://biorxiv.org/">http://biorxiv.org</a>.</small></h2>
            <div>
                <p class="lead">
                <strong>IMP: a pipeline for reproducible integrated metagenomic and metatranscriptomic analyses</strong><br/>
                <small>Shaman Narayanasamy†, Yohan Jarosz†, Emilie E.L. Muller, Cédric C. Laczny, Malte Herold1, Anne Kaysen, Anna Heintz-Buschart, Nicolás Pinel, Patrick May, and Paul Wilmes*</small>
              </p>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="Report/lib/imp.js"></script>
</body>

</html>
