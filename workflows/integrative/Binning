# include rules for the Binning part of the workflow

include:
    '../../rules/Binning/find-essential-genes.rule'

include:
    '../../rules/Binning/binning.rule'

include:
    '../../rules/Binning/separate-bins.rule'

include:
    '../../rules/Binning/prepare-proteins.rule'

include:
    '../../rules/Binning/checkm.rule'

include:
    '../../rules/Binning/bin-analysis.amphora.rule'

include:
    '../../rules/Binning/batch-phylophlan.rule'

include:
    '../../rules/Binning/split-completeness.rule'

include:
    '../../rules/Binning/summarize-completeness.rule'

include:
    '../../rules/Binning/plot-completeness.rule'


# master command
rule BINNING:
    input:
        expand("Binning/clusterFiles/contigs2clusters{pk}{nn}.tsv",pk=config["binning"]["pk"],nn=config["binning"]["nn"]),
        dynamic("Binning/clusterFiles/{cluster}/cluster.{cluster}.contigids"),
        dynamic("Binning/clusterFiles/{cluster}/cluster.{cluster}.gff"),
        dynamic("Binning/clusterFiles/{cluster}/cluster.{cluster}.protids"),
        dynamic("Binning/clusterFiles/{cluster}/cluster.{cluster}.fa"),
        dynamic("Binning/clusterFiles/{cluster}/cluster.{cluster}.faa")
    output:
        touch('binning.done')
