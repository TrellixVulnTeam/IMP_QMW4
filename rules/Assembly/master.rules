# output directory and log
A_OUT, A_LOG = prepare_environment('Assembly')

# include sub rules
include:
    "MGMT.rules"
include:
    "MG.rules"

def assembly_output_files():
    return expand('{dir}/{name}', name=[
        'MG.reads.sorted.bam',
        'MT.reads.sorted.bam'], dir=A_OUT)

# master command
rule ASSEMBLY:
    input:
        assembly_output_files()
    shell:
        "echo 'Assembly Done'"

# MT ASSEMBLY command
rule ASSEMBLY_MT_ALL:
    input:
        "%s/MT.assembly.cat.fa" % A_OUT
    shell:
        "echo 'MT Assembly Done'"

# MG ASSEMBLY command
# This will produce an MG-only assembly
rule ASSEMBLY_MG_ALL:
    input:
        "%s/MG.assembly.merged.fa" % A_OUT
    shell:
        "echo 'MG Assembly Done'"

#rule ASSEMBLY_MG_FAST:
#    input:
#        "%s/MG.assembly.merged.fa" % A_OUT
#    shell:
#        "echo 'MG fast assembly done'"
#
